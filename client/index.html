<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>AI Forecast Dashboard PRO</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- html2canvas & jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>

  <body>
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-circle">AI</div>
        <div class="logo-text">
          <span class="logo-title">Forecast PRO</span>
          <span class="logo-subtitle">Demand Analytics</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="tab-btn active" data-tab="forecastTab">
          <span class="icon">üìä</span>
          <span>D·ª± b√°o t·ª´ng SKU</span>
        </button>
        <button class="tab-btn" data-tab="analyticsTab">
          <span class="icon">üìà</span>
          <span>AI Analytics</span>
        </button>
        <button class="tab-btn" data-tab="compareTab">
          <span class="icon">‚öñ</span>
          <span>So s√°nh SKU</span>
        </button>
        <button class="tab-btn" data-tab="yearTab">
          <span class="icon">üìÖ</span>
          <span>Multi-Year</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="badge badge-green">Online</div>
        <p class="footer-text">Local API: <span>http://localhost:8000</span></p>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="topbar">
        <div>
          <h1>AI Forecast System PRO</h1>
          <p class="topbar-subtitle">
            H·ªá th·ªëng d·ª± b√°o nhu c·∫ßu b√°n h√†ng s·ª≠ d·ª•ng AI & Time Series
          </p>
        </div>

        <div class="topbar-actions">
          <span class="tag">CSV Import</span>
          <span class="tag tag-outline">AI Explain</span>
          <span class="tag tag-accent">PDF Export</span>
        </div>
      </header>

      <!-- TAB 1: FORECAST -->
      <section id="forecastTab" class="tab active">
        <div class="grid">
          <div class="card">
            <div class="card-header">
              <h3>1. T·∫£i d·ªØ li·ªáu CSV</h3>
              <p class="card-subtitle">
                File g·ªìm c√°c c·ªôt:
                <strong>date, sku, quantity, price, promotion</strong>
              </p>
            </div>

            <div class="form-group">
              <label for="fileInput">Ch·ªçn file CSV</label>
              <div class="file-input-wrapper">
                <input type="file" id="fileInput" accept=".csv" />
              </div>
            </div>

            <button class="btn primary" id="uploadBtn" onclick="uploadFile()">
              üì§ Upload &amp; Xem tr∆∞·ªõc
            </button>

            <div class="preview-wrapper">
              <div class="preview-header">
                <span>Xem tr∆∞·ªõc d·ªØ li·ªáu (5‚Äì10 d√≤ng ƒë·∫ßu)</span>
              </div>
              <pre id="uploadPreview" class="preview empty">
Ch∆∞a c√≥ d·ªØ li·ªáu. H√£y upload file CSV...
              </pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>2. D·ª± b√°o xu h∆∞·ªõng b√°n h√†ng</h3>
              <p class="card-subtitle">
                Ch·ªçn SKU &amp; s·ªë ng√†y ƒë·ªÉ h·ªá th·ªëng t·∫°o forecast.
              </p>
            </div>

            <div class="form-group">
              <label>Ch·ªçn SKU</label>
              <select id="skuSelect" class="input">
                <option value="">-- Ch∆∞a c√≥ d·ªØ li·ªáu --</option>
              </select>
            </div>

            <div class="form-group">
              <label>S·ªë ng√†y d·ª± b√°o</label>
              <div class="inline-input">
                <input
                  id="daysInput"
                  type="number"
                  value="14"
                  min="7"
                  max="30"
                  class="input"
                />
                <span class="help-text">Trong kho·∫£ng 7‚Äì30 ng√†y</span>
              </div>
            </div>

            <div class="btn-group">
              <button class="btn accent" id="forecastBtn" onclick="forecast()">
                ‚ö° D·ª± b√°o v·ªõi AI
              </button>
              <button class="btn outline" onclick="exportPDF()">
                üìÑ Xu·∫•t b√°o c√°o PDF
              </button>
            </div>

            <div class="summary-box">
              <div class="summary-title">üìå T√≥m t·∫Øt t·ª´ AI</div>
              <p id="forecastSummary" class="summary-text">
                Ch∆∞a c√≥ forecast. H√£y ch·ªçn SKU v√† b·∫•m ‚ÄúD·ª± b√°o v·ªõi AI‚Äù.
              </p>
            </div>
          </div>
        </div>

        <div class="card full">
          <div class="card-header">
            <h3>Bi·ªÉu ƒë·ªì d·ª± b√°o</h3>
            <p class="card-subtitle">
              ƒê∆∞·ªùng m√†u xanh: d·ªØ li·ªáu l·ªãch s·ª≠ ‚Ä¢ ƒê∆∞·ªùng v√†ng ƒë·ª©t: d·ª± b√°o AI
            </p>
          </div>
          <div class="chart-wrapper">
            <canvas id="forecastChart"></canvas>
          </div>
        </div>
      </section>

      <!-- TAB 2: ANALYTICS -->
      <section id="analyticsTab" class="tab">
        <div class="card full">
          <div class="card-header">
            <h3>üìà Ph√¢n t√≠ch d·ªØ li·ªáu (AI Analytics)</h3>
            <p class="card-subtitle">
              AI t·ª± ƒë·ªông ph√¢n t√≠ch t·ªïng quan: SKU n√†o m·∫°nh, xu h∆∞·ªõng
              tƒÉng/gi·∫£m...
            </p>
          </div>

          <div class="toolbar">
            <button class="btn primary" onclick="analyzeData()">
              üß† Ph√¢n t√≠ch t·ª± ƒë·ªông
            </button>
          </div>

          <div class="split-layout">
            <div class="split-panel">
              <h4>üìù K·∫øt qu·∫£ ph√¢n t√≠ch</h4>
              <pre id="analysisText" class="analysis-box">
Ch∆∞a c√≥ k·∫øt qu·∫£. B·∫•m ‚ÄúPh√¢n t√≠ch t·ª± ƒë·ªông‚Äù ƒë·ªÉ b·∫Øt ƒë·∫ßu.
              </pre>
            </div>

            <div class="split-panel">
              <h4>üìä T·ªïng l∆∞·ª£ng b√°n theo SKU</h4>
              <div class="chart-wrapper">
                <canvas id="analyticsChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 3: COMPARE -->
      <section id="compareTab" class="tab">
        <div class="grid">
          <div class="card">
            <div class="card-header">
              <h3>So s√°nh forecast gi·ªØa hai SKU</h3>
              <p class="card-subtitle">
                H·ªá th·ªëng s·∫Ω forecast 14 ng√†y cho 2 SKU ƒë·ªÉ so s√°nh.
              </p>
            </div>

            <div class="form-group">
              <label>SKU 1</label>
              <select id="compareSku1" class="input">
                <option value="">-- Ch∆∞a c√≥ d·ªØ li·ªáu --</option>
              </select>
            </div>

            <div class="form-group">
              <label>SKU 2</label>
              <select id="compareSku2" class="input">
                <option value="">-- Ch∆∞a c√≥ d·ªØ li·ªáu --</option>
              </select>
            </div>

            <button class="btn accent" onclick="compareForecast()">
              ‚öñ So s√°nh forecast
            </button>
          </div>
        </div>

        <div class="card full">
          <div class="card-header">
            <h3>Bi·ªÉu ƒë·ªì so s√°nh</h3>
            <p class="card-subtitle">
              Hai ƒë∆∞·ªùng th·ªÉ hi·ªán forecast cho t·ª´ng SKU trong c√πng giai ƒëo·∫°n.
            </p>
          </div>
          <div class="chart-wrapper">
            <canvas id="compareChart"></canvas>
          </div>
        </div>
      </section>

      <!-- TAB 4: MULTI-YEAR ANALYSIS -->
      <section id="yearTab" class="tab">
        <div class="card full">
          <div class="card-header">
            <h3>üìÖ Ph√¢n t√≠ch nhi·ªÅu nƒÉm (Multi-Year Analysis)</h3>
            <p class="card-subtitle">
              T·∫£i nhi·ªÅu file CSV (2022, 2023, 2024‚Ä¶) ƒë·ªÉ ph√¢n t√≠ch xu h∆∞·ªõng theo
              nƒÉm.
            </p>
          </div>

          <div class="grid grid-2">
            <div>
              <div class="form-group">
                <label>T·∫£i nhi·ªÅu file CSV</label>
                <input
                  type="file"
                  id="multiFileInput"
                  multiple
                  accept=".csv"
                  class="input"
                />
              </div>

              <div class="btn-group">
                <button class="btn primary" onclick="uploadMulti()">
                  üì§ T·∫£i c√°c file
                </button>
                <button class="btn accent" onclick="multiYearAnalysis()">
                  üß† AI ph√¢n t√≠ch nhi·ªÅu nƒÉm
                </button>
              </div>

              <div class="preview-wrapper">
                <div class="preview-header">
                  <span>Raw data t·ª´ nhi·ªÅu nƒÉm</span>
                </div>
                <pre id="multiRaw" class="preview small">
Ch∆∞a c√≥ d·ªØ li·ªáu. H√£y ch·ªçn v√† upload c√°c file CSV nhi·ªÅu nƒÉm.
          </pre
                >
              </div>
            </div>

            <div>
              <h4>üß† K·∫øt lu·∫≠n t·ª´ AI</h4>
              <div
                id="multiAI"
                class="analysis-box small"
                style="white-space: normal"
              >
                Ch∆∞a c√≥ ph√¢n t√≠ch. B·∫•m ‚ÄúAI ph√¢n t√≠ch nhi·ªÅu nƒÉm‚Äù.
              </div>
            </div>
          </div>
          <!-- ‚úÖ Thi·∫øu th·∫ª n√†y -->

          <div class="card-subsection">
            <h4>üìä Bi·ªÉu ƒë·ªì t·ªïng l∆∞·ª£ng b√°n theo nƒÉm</h4>
            <div class="chart-wrapper">
              <canvas id="multiChart"></canvas>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- LOADING OVERLAY -->
    <div id="loading" class="loading hidden">
      <div class="loading-inner">
        <div class="spinner"></div>
        <p>AI ƒëang x·ª≠ l√Ω, vui l√≤ng ƒë·ª£i...</p>
      </div>
    </div>

    <!-- JS -->
    <script src="./js/main.js"></script>
  </body>
</html>
